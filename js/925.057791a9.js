"use strict";(globalThis["webpackChunklc_bot_admin_ui"]=globalThis["webpackChunklc_bot_admin_ui"]||[]).push([[925],{8925:(e,o,l)=>{l.r(o),l.d(o,{default:()=>R});var t=l(9835),a=l(1957),n=l(6970);const r={class:"q-pa-md"},s={class:"q-pa-xs"},i={class:"q-pa-md q-gutter-y-sm column"},d={key:0,class:"q-pa-md"},u={class:"text-left"},c=["props"],p={key:1,class:"q-pa-md"};function m(e,o,l,m,f,g){const v=(0,t.up)("q-input"),w=(0,t.up)("q-expansion-item"),h=(0,t.up)("q-separator"),y=(0,t.up)("q-list"),b=(0,t.up)("q-btn"),_=(0,t.up)("q-form"),V=(0,t.up)("q-step"),S=(0,t.up)("q-toggle"),q=(0,t.up)("q-th"),k=(0,t.up)("q-tr"),W=(0,t.up)("q-td"),T=(0,t.up)("q-item-label"),Z=(0,t.up)("q-item-section"),C=(0,t.up)("q-item"),Q=(0,t.up)("q-icon"),x=(0,t.up)("q-file"),j=(0,t.up)("q-table"),U=(0,t.up)("q-btn-group"),D=(0,t.up)("q-stepper-navigation"),I=(0,t.up)("q-stepper"),E=(0,t.up)("q-page"),P=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.j4)(E,{class:"row justify-evenly"},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.Wm)(I,{modelValue:e.step,"onUpdate:modelValue":o[10]||(o[10]=o=>e.step=o),ref:"stepper","alternative-labels":"",color:"primary",animated:""},{navigation:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{onClick:o[8]||(o[8]=o=>e.$refs.stepper.next()),color:"primary",label:3===e.step?"Finish":"Continue"},null,8,["label"]),e.step>1?((0,t.wg)(),(0,t.j4)(b,{key:0,flat:"",color:"primary",onClick:o[9]||(o[9]=o=>e.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):(0,t.kq)("",!0)])),_:1})])),default:(0,t.w5)((()=>[(0,t.Wm)(V,{name:1,title:"Edit Configuration",icon:"settings",done:e.step>1},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{onSubmit:(0,a.iM)(e.submitForm,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{group:"somegroup",icon:"smart_toy",label:"SYSTEM PROMPT","default-opened":"","header-class":"text-primary"},{default:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t.Wm)(v,{modelValue:e.lc.envVar["CHAT_SYSTEM_PROMPT"],"onUpdate:modelValue":o[0]||(o[0]=o=>e.lc.envVar["CHAT_SYSTEM_PROMPT"]=o),outlined:"",autogrow:""},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(h),(0,t.Wm)(w,{group:"somegroup",icon:"settings",label:"ADVANCED SETTINGS","header-class":"text-teal"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.lc.envVar,((o,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[(0,t.Wm)(v,{modelValue:e.lc.envVar[l],"onUpdate:modelValue":o=>e.lc.envVar[l]=o,label:l,value:e.lc.envVar[l],type:"text",outlined:"",class:"q-pa-xs"},null,8,["modelValue","onUpdate:modelValue","label","value"])])))),128))])),_:1})])),_:1}),(0,t.Wm)(b,{type:"submit",label:"Save",class:"q-mt-md"})])),_:1},8,["onSubmit"])])),_:1},8,["done"]),(0,t.Wm)(V,{name:2,title:"Add Tool(s) & Document(s)",caption:"Optional",icon:"create_new_folder",done:e.step>2},{default:(0,t.w5)((()=>[(0,t._)("div",i,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.lc.toolsVar,((o,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[(0,t.Uk)((0,n.zw)(l),1),(0,t.Wm)(S,{modelValue:e.lc.toolsVar[l],"onUpdate:modelValue":o=>e.lc.toolsVar[l]=o},null,8,["modelValue","onUpdate:modelValue"])])))),128))]),e.lc.toolsVar["docsimport"]?((0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(j,{flat:"",bordered:"",title:"Upload docs",rows:e.rows,columns:e.columns,"row-key":"name"},{header:(0,t.w5)((e=>[(0,t.Wm)(k,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{"auto-width":""}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(o=>((0,t.wg)(),(0,t.j4)(q,{key:o.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(o.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((l=>[(0,t.Wm)(k,{props:l},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{"auto-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{size:"sm",color:"primary",round:"",dense:"",onClick:e=>l.expand=!l.expand,icon:l.expand?"remove":"add"},null,8,["onClick","icon"])])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.cols,(e=>((0,t.wg)(),(0,t.j4)(W,{key:e.name,props:l},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.value),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"]),(0,t.wy)((0,t.Wm)(k,{props:l},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{colspan:"100%"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.lc.getFolderData(l.row.name),(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.subfolder,props:l,class:"q-pa-xs"},[(0,t.Wm)(y,{bordered:"",separator:""},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{header:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.subfolder),1)])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.files,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(C,{key:e},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e),1)])),_:2},1024)])),_:2},1024)),[[P]]))),128))])),_:2},1024)],8,c)))),128)),(0,t.Wm)(v,{class:"q-pa-md",modelValue:e.subfolder,"onUpdate:modelValue":o[1]||(o[1]=o=>e.subfolder=o),outlined:"",label:"Subfolder Name"},null,8,["modelValue"]),(0,t.Wm)(x,{class:"q-px-md",outlined:"","bottom-slots":"",modelValue:e.uploadfile[l.row.name],"onUpdate:modelValue":o=>e.uploadfile[l.row.name]=o,label:"Upload File",counter:"","max-files":"1"},{before:(0,t.w5)((()=>[(0,t.Wm)(Q,{name:"folder_open"})])),append:(0,t.w5)((()=>[(0,t.Wm)(b,{round:"",dense:"",flat:"",icon:"add",onClick:o=>e.upload(e.uploadfile[l.row.name],l.row.name)},null,8,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1032,["props"]),[[a.F8,l.expand]])])),_:1},8,["rows","columns"])])):(0,t.kq)("",!0),e.lc.toolsVar["zapiertool"]?((0,t.wg)(),(0,t.iD)("div",p,[(0,t.Wm)(b,{color:"secondary",label:"Open Zapier NLA",onClick:e.openZapier},null,8,["onClick"])])):(0,t.kq)("",!0),(0,t.Wm)(b,{label:"Save",onClick:o[2]||(o[2]=o=>e.saveTools()),class:"q-mt-md"})])),_:1},8,["done"]),(0,t.Wm)(V,{name:3,title:"Start InSource",icon:"add_comment"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{spread:""},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{color:"primary",label:"Start",icon:"start",onClick:o[3]||(o[3]=o=>e.ops("start"))}),(0,t.Wm)(b,{color:"secondary",label:"Restart",icon:"restart_alt",onClick:o[4]||(o[4]=o=>e.ops("restart"))}),(0,t.Wm)(b,{color:"red",label:"Stop",icon:"stop",onClick:o[5]||(o[5]=o=>e.ops("stop"))})])),_:1}),(0,t.Wm)(v,{class:"q-pa-md",type:"textarea",rows:"15",modelValue:e.logs,"onUpdate:modelValue":o[6]||(o[6]=o=>e.logs=o),outlined:"",label:"Logs"},null,8,["modelValue"]),(0,t.Wm)(b,{label:"Refresh Log",icon:"refresh",onClick:o[7]||(o[7]=o=>e.getLogs())})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}var f=l(499),g=l(1809),v=function(e,o,l,t){function a(e){return e instanceof l?e:new l((function(o){o(e)}))}return new(l||(l=Promise))((function(l,n){function r(e){try{i(t.next(e))}catch(o){n(o)}}function s(e){try{i(t["throw"](e))}catch(o){n(o)}}function i(e){e.done?l(e.value):a(e.value).then(r,s)}i((t=t.apply(e,o||[])).next())}))};const w=(0,g.Q_)("lcadmin",{state:()=>({envVar:{},toolsVar:{docsimport:!1,zapiertool:!1,customtools:!1},docsVar:{}}),getters:{getFolderData:e=>o=>e.docsVar.files.filter((e=>e.folder===o))},actions:{getEnv(){return v(this,void 0,void 0,(function*(){try{const e=yield fetch(`${localStorage.getItem("adminurl")}/env`),o=yield e.json();this.envVar=o}catch(e){console.error("Error:",e)}}))},putEnv(){return v(this,void 0,void 0,(function*(){try{const e=yield fetch(`${localStorage.getItem("adminurl")}/env`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.envVar)}),o=yield e.json();return console.log("Success:",o),o}catch(e){return console.error("Error:",e),e}}))},getTools(){return v(this,void 0,void 0,(function*(){try{const e=yield fetch(`${localStorage.getItem("adminurl")}/toggle_tools`),o=yield e.json();this.toolsVar.docsimport=o.tools.includes("docsimport"),this.toolsVar.customtools=o.tools.includes("zapiertool"),this.toolsVar.customtools=o.tools.includes("customtools")}catch(e){console.error("Error:",e)}}))},updateTools(){return v(this,void 0,void 0,(function*(){yield fetch(`${localStorage.getItem("adminurl")}/disable_all_tools`);const e=Object.entries(this.toolsVar);for(const[l,t]of e)if(t)try{const e=yield fetch(`${localStorage.getItem("adminurl")}/toggle_tools`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l})}),o=yield e.json();console.log("Success:",o)}catch(o){console.error("Error:",o)}}))},getFiles(){return v(this,void 0,void 0,(function*(){try{const e=yield fetch(`${localStorage.getItem("adminurl")}/readall`),o=yield e.json();this.docsVar=o}catch(e){return console.error("Error:",e),null}}))}}});var h=l(6950),y=function(e,o,l,t){function a(e){return e instanceof l?e:new l((function(o){o(e)}))}return new(l||(l=Promise))((function(l,n){function r(e){try{i(t.next(e))}catch(o){n(o)}}function s(e){try{i(t["throw"](e))}catch(o){n(o)}}function i(e){e.done?l(e.value):a(e.value).then(r,s)}i((t=t.apply(e,o||[])).next())}))};const b=[{name:"File Type",required:!0,label:"filetype",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0}],_=[{name:"txts"},{name:"csvs"},{name:"pdfs"},{name:"htmls"},{name:"markdowns"}],V=(0,t.aZ)({name:"ConfigPage",components:{},setup(){const e=(0,f.iH)(w()),o=(0,f.iH)("");e.value.getEnv(),e.value.getTools(),e.value.getFiles();const l=(0,f.iH)(1),t=(0,f.iH)({}),a=(0,f.iH)(null),n=()=>{h.Z.show(),e.value.putEnv(),h.Z.hide(),alert("Saved")},r=(o,l)=>y(this,void 0,void 0,(function*(){console.log(o);let n=new FormData;n.append("file",o);yield fetch(`${localStorage.getItem("adminurl")}/upload/${l}/${a.value}`,{method:"POST",body:n});t.value={},a.value=null,e.value.getFiles()})),s=()=>{window.open("https://nla.zapier.com/get-started/","_blank")},i=()=>y(this,void 0,void 0,(function*(){const e=yield fetch(`${localStorage.getItem("adminurl")}/service-ops/`,{method:"POST",headers:{"Content-Type":"application/json"},body:'{"action": "logs"}'});let l=yield e.json(),t=l.result.stdout.split("\n"),a=t.slice(-10).join("\n");return o.value=a,a})),d=e=>y(this,void 0,void 0,(function*(){yield fetch(`${localStorage.getItem("adminurl")}/service-ops/`,{method:"POST",headers:{"Content-Type":"application/json"},body:`{"action": "${e}"}`});alert(e+"Completed")})),u=()=>y(this,void 0,void 0,(function*(){h.Z.show(),e.value.updateTools(),h.Z.hide(),alert("Saved")}));return i(),{step:l,lc:e,submitForm:n,columns:b,rows:_,uploadfile:t,upload:r,subfolder:a,openZapier:s,logs:o,getLogs:i,saveTools:u,ops:d}}});var S=l(1639),q=l(9885),k=l(8225),W=l(6017),T=l(8326),Z=l(3246),C=l(651),Q=l(3119),x=l(926),j=l(9379),U=l(3175),D=l(5792),I=l(3532),E=l(1682),P=l(7220),$=l(3115),F=l(490),H=l(1233),O=l(9420),z=l(2857),Y=l(7236),L=l(1992),M=l(1136),N=l(9984),A=l.n(N);const K=(0,S.Z)(V,[["render",m]]),R=K;A()(V,"components",{QPage:q.Z,QStepper:k.Z,QStep:W.Z,QForm:T.Z,QList:Z.Z,QExpansionItem:C.Z,QInput:Q.Z,QSeparator:x.Z,QBtn:j.Z,QToggle:U.Z,QTable:D.Z,QTr:I.Z,QTh:E.Z,QTd:P.Z,QItemLabel:$.Z,QItem:F.Z,QItemSection:H.Z,QFile:O.Z,QIcon:z.Z,QBtnGroup:Y.Z,QStepperNavigation:L.Z}),A()(V,"directives",{Ripple:M.Z})}}]);